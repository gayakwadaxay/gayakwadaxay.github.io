import{d as g,e as j,r as a,a as w,f as u,j as e,D as y,F as x,I as p,B as v}from"./index-ITUZFsCX.js";import{l as N,L as b,v as E}from"./react-simple-captcha-DwYpHvl1.js";const C=()=>{const o=async c=>(await j.post("/password-reset",c,{headers:{"Content-Type":"application/json"}})).data,{mutate:i,data:t,error:s,isLoading:r,isError:l,isSuccess:n}=g(o);return{mutate:i,data:t,error:s,isLoading:r,isError:l,isSuccess:n}},S=()=>{const{mutate:o,data:i,error:t,isLoading:s,isError:r,isSuccess:l}=C(),n=a.useRef(null),c=w(),[d,h]=a.useState(""),f=m=>{E(d)?o(m):u.error("CAPTCHA validation failed! Please try again.")};return a.useEffect(()=>{N(4,"#000","#fff","upper")},[]),a.useEffect(()=>{l&&(u.success("Password reset link sent to your email!"),c("/",{replace:!0}))},[l,i]),a.useEffect(()=>{r&&u.error(t.message)},[r,t]),e.jsx(y,{children:e.jsx("main",{className:"relative h-full flex flex-col justify-center bg-indigo-500 overflow-hidden px-4",children:e.jsxs("div",{className:"w-100 max-w-6xl mx-auto px-0 md:px-6 my-2 mb-12 md:py-24",children:[e.jsx("h1",{className:"text-4xl text-white pacifico-regular w-100 text-center my-5",children:"SafeGreet"}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"w-full mx-auto text-center bg-white px-4 sm:px-8 py-10 rounded-xl shadow",children:[e.jsxs("header",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-indigo-500 mb-1",children:"Forgot your password?"}),e.jsx("p",{className:"text-[15px] text-slate-500",children:"Enter your email to reset your password."})]}),e.jsxs(x,{onFinish:f,ref:n,layout:"vertical",children:[e.jsx(x.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Please enter your email!"},{type:"email",message:"Please enter a valid email!"}],children:e.jsx(p,{placeholder:"Enter your email",className:"w-80 px-4 border rounded-md"})}),e.jsx(x.Item,{className:"flex items-center justify-center",children:e.jsxs("div",{className:"captcha-wrapper w-80",children:[e.jsx(b,{}),e.jsx(p,{placeholder:"Enter the CAPTCHA",className:"px-4 border rounded-md ",value:d,onChange:m=>h(m.target.value)})]})}),e.jsx(v,{htmlType:"submit",className:"w-80 mt-1 bg-indigo-500 text-white px-2 rounded-lg",disabled:s,loading:s,children:s?"Sending...":"Send Reset Link"})]})]})})]})})})};export{S as default};
