import{d as P,e as b,r as j,a as N,A as v,f as n,j as e,D as E,F as l,I as y,B as R}from"./index-BMG0Xdh9.js";const F=()=>{const d=async a=>(await b.post("/password-reset-confirm/",a,{headers:{"Content-Type":"application/json","X-Tenant-UUID":a.company}})).data,{mutate:m,data:u,error:r,isLoading:p,isError:x,isSuccess:i}=P(d);return{mutate:m,data:u,error:r,isLoading:p,isError:x,isSuccess:i}},C=()=>{const{mutate:d,data:m,error:u,isLoading:r,isError:p,isSuccess:x}=F(),i=j.useRef(null),a=N(),{token:t,company:o}=v(),g=c=>{const w={...c,token:t,company:o};if(!o||!t)return n.error("Password reset link expired!");d(w,{onSuccess:()=>{n.success("Password reset successful!"),a("/?c="+o,{replace:!0})},onError:s=>{var h,f;(f=(h=s==null?void 0:s.response)==null?void 0:h.data)!=null&&f.data&&n.error(s.response.data.data)}})};return j.useEffect(()=>{(!o||!t)&&n.error("Password reset link expired!")},[]),e.jsx(E,{children:e.jsx("main",{className:"relative h-full flex flex-col justify-center bg-indigo-500 overflow-hidden px-4",children:e.jsxs("div",{className:"w-100 max-w-6xl mx-auto px-0 md:px-6 my-2 mb-12 md:py-24",children:[e.jsx("h1",{className:"text-4xl text-white pacifico-regular w-100 text-center my-5",children:"SafeGreet"}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"w-full mx-auto text-center bg-white px-4 sm:px-8 py-10 rounded-xl shadow",children:[e.jsxs("header",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-indigo-500 mb-1",children:"Reset your password"}),e.jsx("p",{className:"text-[15px] text-slate-500",children:"Enter your new password below."})]}),e.jsxs(l,{onFinish:g,ref:i,layout:"vertical",children:[e.jsx(l.Item,{name:"password",label:"New Password",rules:[{required:!0,message:"Please enter your new password!"},{min:6,message:"Password must be at least 6 characters!"}],children:e.jsx(y.Password,{placeholder:"Enter your new password",className:"w-80 px-4 border rounded-md"})}),e.jsx(l.Item,{name:"confirm_password",label:"Confirm Password",dependencies:["password"],rules:[{required:!0,message:"Please confirm your password!"},({getFieldValue:c})=>({validator(w,s){return!s||c("password")===s?Promise.resolve():Promise.reject(new Error("The two passwords do not match!"))}})],children:e.jsx(y.Password,{placeholder:"Confirm your new password",className:"w-80 px-4 border rounded-md"})}),e.jsx(R,{htmlType:"submit",className:"w-80 mt-1 bg-indigo-500 text-white px-2 rounded-lg",disabled:r,loading:r,children:r?"Resetting...":"Reset Password"})]})]})})]})})})};export{C as default};
